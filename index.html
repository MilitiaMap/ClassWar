<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RESISTANCE HQ :: Intel Feed</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <link rel="icon" type="image/x-icon" href="/favicon.ico"> <!-- Make sure you have a favicon here -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-main: #0a0a0a; /* Deep black */
            --bg-card: #1a1a1a; /* Dark gray for cards */
            --bg-player: #222222; /* Slightly lighter for player internal */
            --bg-item-hover: #333333;
            --text-primary: #e0e0e0; /* Off-white */
            --text-secondary: #a0a0a0; /* Gray for less emphasis */
            --text-title: #ffffff;
            --accent: #f97316; /* The orange */
            --accent-hover: #ff8c40;
            --border-color: #444444;
            --font-body: 'Roboto', sans-serif;
            --font-mono: 'Roboto Mono', monospace; /* For a slightly 'terminal' feel */
        }

        /* --- Base & Reset --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            scrollbar-width: thin;
            scrollbar-color: var(--accent) var(--bg-main);
        }
         html::-webkit-scrollbar { width: 8px; }
         html::-webkit-scrollbar-track { background: var(--bg-main); }
         html::-webkit-scrollbar-thumb { background-color: var(--accent); border-radius: 4px; border: 2px solid var(--bg-main); }

        body {
            background-color: var(--bg-main);
            color: var(--text-primary);
            font-family: var(--font-body);
            line-height: 1.6;
        }

        a {
            color: var(--accent);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        a:hover {
            color: var(--accent-hover);
            text-decoration: underline;
        }

        h1, h2, h3 {
            font-family: var(--font-mono);
            font-weight: 700;
            color: var(--text-title);
            margin-bottom: 1rem;
        }

        /* --- Header --- */
        .site-header {
            background-color: var(--bg-card);
            border-bottom: 2px solid var(--border-color);
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .header-icon {
            font-size: 1.8rem;
            color: var(--accent);
        }
        .site-title {
            font-size: 1.4rem;
            margin: 0;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* --- Main Layout --- */
        .main-container {
            max-width: 1400px; /* Wider container */
            margin: 2rem auto;
            padding: 0 1.5rem;
        }

        .grid-layout {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); /* Responsive columns */
            gap: 2rem;
        }

        /* --- Info Cards --- */
        .info-card {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 4px; /* Sharper corners */
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
        }
        .card-title {
            font-size: 1.3rem;
            color: var(--accent);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.75rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            display: flex; /* Needed for icon alignment and button positioning */
            align-items: center;
            gap: 0.75rem;
        }
        .card-title i { /* Icon in card title */
           font-size: 1.1em;
        }

        .content-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 0.75rem; /* Space between list items */
        }
        .content-list li a, .content-list li span { /* General list item style */
            display: flex;
            align-items: center;
            gap: 0.85rem;
            padding: 0.65rem 1rem; /* Compact padding */
            background-color: var(--bg-main); /* Use main bg for contrast */
            border: 1px solid var(--border-color);
            border-radius: 3px;
            color: var(--text-primary);
            transition: background-color 0.2s ease, border-color 0.2s ease;
            font-size: 0.95rem;
        }
        .content-list li a:hover {
            background-color: var(--bg-item-hover);
            border-color: var(--accent);
            color: var(--text-title);
            text-decoration: none;
        }
        .content-list li a i { /* Icon within list items */
            color: var(--accent);
            width: 20px;
            text-align: center;
            flex-shrink: 0;
        }
         .content-list li a:hover i {
             color: var(--accent-hover);
         }

        /* --- AUDIO PLAYER CARD --- */
        .audio-player-card {
             /* Allows spanning if needed, or just normal fit */
             /* Example: grid-column: span 2; */
        }

        .audio-player {
            background-color: var(--bg-player); /* Distinct player background */
            border: 1px solid var(--border-color);
            border-radius: 3px;
            padding: 1rem;
            margin-top: -0.5rem; /* Pull slightly closer to title */
        }

        /* 1. Track Title Display */
        .player-track-title {
            font-family: var(--font-mono);
            font-size: 1.1rem;
            color: var(--text-title);
            text-align: center;
            margin-bottom: 1rem;
            min-height: 1.5em;
            padding: 0.25rem;
            background-color: rgba(0,0,0,0.2);
            border-radius: 2px;
        }

        /* 2. Progress & Time */
        .player-progress-area {
            margin-bottom: 0.75rem;
        }
        .progress-bar-wrapper {
            background-color: var(--bg-main);
            border-radius: 3px;
            padding: 2px;
            border: 1px solid var(--border-color);
            cursor: pointer;
        }
        .progress-bar {
            background-color: var(--accent);
            height: 10px;
            width: 0%;
            border-radius: 2px;
            transition: width 0.1s linear;
        }
        .player-time-display {
            display: flex;
            justify-content: space-between;
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--text-secondary);
            padding: 0.25rem 0;
        }

        /* 3. Controls */
        .player-controls {
            display: flex;
            justify-content: space-between; /* Main controls center, volume right */
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        .main-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem; /* Tight controls */
        }
        .volume-controls {
             display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .player-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            width: 38px;
            height: 38px;
            border-radius: 50%;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s, border-color 0.2s;
            font-size: 0.9rem;
        }
        .player-btn:hover {
            background-color: var(--bg-item-hover);
            color: var(--text-primary);
            border-color: #666;
        }
        .player-btn.play-pause-btn { /* Larger central button */
            width: 44px;
            height: 44px;
            background-color: var(--accent);
            color: var(--bg-main);
            border-color: var(--accent);
            font-size: 1.1rem;
        }
         .player-btn.play-pause-btn:hover {
             background-color: var(--accent-hover);
             border-color: var(--accent-hover);
         }
        .player-btn#volume-btn { /* Specific volume button styling */
             width: 32px;
             height: 32px;
             font-size: 0.8rem;
        }

        #volume-slider {
            width: 80px;
            height: 6px;
            cursor: pointer;
            appearance: none;
            background: var(--bg-main);
            border-radius: 3px;
            border: 1px solid var(--border-color);
            outline: none;
        }
        #volume-slider::-webkit-slider-thumb {
            appearance: none; width: 14px; height: 14px;
            background: var(--accent); border-radius: 50%; cursor: pointer;
            border: 1px solid var(--bg-main);
        }
        #volume-slider::-moz-range-thumb {
             width: 14px; height: 14px; background: var(--accent);
             border-radius: 50%; cursor: pointer; border: 1px solid var(--bg-main);
        }

        /* 4. Playlist */
        .player-playlist {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: 250px; /* Adjust as needed */
            overflow-y: auto;
        }
        .playlist-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0.75rem; /* Compact */
            margin-bottom: 3px;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-size: 0.9rem;
            border: 1px solid transparent; /* Placeholder for hover/playing */
        }
        .playlist-item:hover {
            background-color: var(--bg-item-hover);
            border-color: #555;
        }
        .playlist-item.playing {
            background-color: var(--accent);
            color: var(--bg-main);
            font-weight: 700;
            border-color: var(--accent-hover);
        }
        .playlist-item-info {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            flex-grow: 1;
            overflow: hidden; /* Prevent long titles breaking layout */
        }
        .playlist-item-icon {
            width: 16px;
            text-align: center;
            font-size: 0.8em;
            color: transparent; /* Hide initially */
            flex-shrink: 0;
        }
        .playlist-item.playing .playlist-item-icon {
            color: var(--bg-main); /* Show playing icon */
        }
        .playlist-item-title {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .playlist-item-download {
            color: var(--text-secondary);
            padding: 0.2rem 0.4rem;
            margin-left: 0.5rem;
            flex-shrink: 0;
            border-radius: 3px;
        }
        .playlist-item-download:hover {
             color: var(--accent);
             background-color: rgba(255, 255, 255, 0.1);
             text-decoration: none;
        }
         .playlist-item.playing .playlist-item-download {
             color: rgba(0, 0, 0, 0.7);
         }
          .playlist-item.playing .playlist-item-download:hover {
              color: var(--bg-main);
              background-color: rgba(255, 255, 255, 0.2);
          }

        /* --- Map Card --- */
        .map-card {
            /* Can span columns if desired, e.g., grid-column: span 2; */
            /* Let's make it span 2 columns by default */
            grid-column: 1 / -1; /* Span full width of the available grid columns */
        }

        .map-iframe-container {
            width: 100%;
             /* Use aspect-ratio for responsive height, or set a fixed height */
             /* aspect-ratio: 16 / 9; */
            height: 500px; /* Or adjust this fixed height as needed */
            overflow: hidden; /* Hide potential scrollbars on container */
            border: 1px solid var(--border-color);
            border-radius: 3px;
            margin-top: -0.5rem; /* Pull closer to title like player */
        }

        .map-iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none; /* Remove iframe default border */
            display: block; /* Remove potential bottom space */
        }

        .map-link-button {
            margin-left: auto; /* Push button to the right */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: var(--bg-item-hover);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            border-radius: 3px;
            padding: 0.3rem 0.6rem;
            font-size: 0.8rem;
            line-height: 1;
            transition: background-color 0.2s, color 0.2s, border-color 0.2s;
            text-decoration: none; /* Override default link underline */
            font-family: var(--font-body); /* Ensure consistent font */
            cursor: pointer;
        }
        .map-link-button:hover {
            background-color: var(--accent);
            color: var(--bg-main);
            border-color: var(--accent-hover);
            text-decoration: none;
        }
        .map-link-button i {
             font-size: 0.9em;
             margin-left: 0.4em; /* Space between text and icon */
        }


        /* --- Agafonkin Card (Special Styling) --- */
        .dedication-card blockquote {
            border-left: 3px solid var(--accent);
            margin: 1.5rem 0;
            padding: 0.5rem 1rem;
            background-color: var(--bg-main);
            color: var(--text-secondary);
            font-style: italic;
            font-size: 0.95rem;
        }
        .dedication-card .logo-container { text-align: center; margin-top: 1.5rem; }
        .dedication-card .logo { max-width: 150px; opacity: 0.8; }

        /* --- Footer --- */
        .site-footer {
            text-align: center;
            margin-top: 3rem;
            padding: 1.5rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-family: var(--font-mono);
        }

        /* --- Responsive Adjustments --- */
        @media (max-width: 768px) {
            .map-card {
                grid-column: auto; /* Revert to default single column flow */
            }
            .map-iframe-container {
                height: 400px; /* Adjust height for smaller screens */
            }
            .card-title {
                font-size: 1.1rem; /* Slightly smaller title on mobile */
            }
             .map-link-button {
                 font-size: 0.75rem;
                 padding: 0.25rem 0.5rem;
            }
        }


    </style>
</head>
<body>

    <header class="site-header">
        <i class="fas fa-fist-raised header-icon"></i>
        <h1 class="site-title">Resistance HQ :: Intel Feed</h1>
    </header>

    <main class="main-container">

        <!-- Optional Intro Text -->
        <!--
        <section class="intro-text" style="margin-bottom: 2rem; padding: 1rem; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 4px;">
            <h2 style="color: var(--accent); font-size: 1.2rem;">STATUS:// Vigilance Required</h2>
            <p style="color: var(--text-secondary);">Forces align against freedom. Knowledge is our shield, action is our spear. Absorb the intel, understand the threats, prepare to act. The future is unwritten. </p>
        </section>
        -->

        <div class="grid-layout">

             <!-- === MAP CARD === -->
             <div class="info-card map-card">
                 <h2 class="card-title">
                    <i class="fas fa-map-marked-alt"></i> Area Overview
                    <a href="/maps/MainMap.html" target="_blank" class="map-link-button" title="Open Full Map">
                        Full Map <i class="fas fa-external-link-alt"></i>
                    </a>
                 </h2>
                 <div class="map-iframe-container">
                    <iframe
                        src="/maps/MainMap.html"
                        title="Embedded Interactive Map"
                        loading="lazy"
                    ></iframe>
                 </div>
             </div>
            <!-- === END MAP CARD === -->


            <!-- === AUDIO PLAYER CARD === -->
            <!-- ADD 'audio-player-card' class -->
            <div class="info-card audio-player-card">
                <h2 class="card-title"><i class="fas fa-headphones"></i> Audio Briefings</h2>

                <div class="audio-player" id="audio-player">
                    <!-- 1. Track Title -->
                    <div class="player-track-title" id="player-track-title">Select Briefing</div>

                    <!-- 2. Progress & Time -->
                    <div class="player-progress-area">
                        <div class="progress-bar-wrapper" id="progress-bar-wrapper">
                            <div class="progress-bar" id="progress-bar"></div>
                        </div>
                        <div class="player-time-display">
                            <span id="current-time">0:00</span>
                            <span id="duration">0:00</span>
                        </div>
                    </div>

                    <!-- 3. Controls -->
                    <div class="player-controls">
                        <div class="main-controls">
                            <button id="prev-btn" class="player-btn" title="Previous Track"><i class="fas fa-backward-step"></i></button>
                            <button id="play-btn" class="player-btn play-pause-btn" title="Play"><i class="fas fa-play"></i></button>
                            <button id="pause-btn" class="player-btn play-pause-btn" title="Pause" style="display: none;"><i class="fas fa-pause"></i></button>
                            <button id="next-btn" class="player-btn" title="Next Track"><i class="fas fa-forward-step"></i></button>
                            <button id="stop-btn" class="player-btn" title="Stop"><i class="fas fa-stop"></i></button>
                        </div>
                        <div class="volume-controls">
                            <button id="volume-btn" class="player-btn" title="Mute/Unmute"><i class="fas fa-volume-high"></i></button>
                            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1" title="Volume">
                        </div>
                    </div>

                    <!-- 4. Playlist -->
                    <ul class="player-playlist" id="player-playlist">
                        <!-- Audio List Items -->
                        <li class="playlist-item" data-src="../audio/ICEArrests2025.mp3">
                            <div class="playlist-item-info">
                                <span class="playlist-item-icon"><i class="fas fa-play"></i></span>
                                <span class="playlist-item-title">ICE/CBP Arrests 2025</span>
                            </div>
                            <a href="../audio/ICEArrests2025.mp3" download="ICEArrests2025.mp3" class="playlist-item-download" title="Download">
                                <i class="fas fa-download"></i>
                            </a>
                        </li>
                        <li class="playlist-item" data-src="../audio/VenezuelanDeportation.mp3">
                            <div class="playlist-item-info">
                                <span class="playlist-item-icon"><i class="fas fa-play"></i></span>
                                <span class="playlist-item-title">Venezuelan Deportation</span>
                            </div>
                            <a href="../audio/VenezuelanDeportation.mp3" download="VenezuelanDeportation.mp3" class="playlist-item-download" title="Download">
                                <i class="fas fa-download"></i>
                            </a>
                        </li>
                        <li class="playlist-item" data-src="../audio/MassDeportation_March2025.mp3">
                             <div class="playlist-item-info">
                                <span class="playlist-item-icon"><i class="fas fa-play"></i></span>
                                <span class="playlist-item-title">Mass Deportation Threat</span>
                            </div>
                            <a href="../audio/MassDeportation_March2025.mp3" download="MassDeportation_March2025.mp3" class="playlist-item-download" title="Download">
                                <i class="fas fa-download"></i>
                            </a>
                        </li>
                         <li class="playlist-item" data-src="../audio/MeaslesInfo.mp3">
                            <div class="playlist-item-info">
                                <span class="playlist-item-icon"><i class="fas fa-play"></i></span>
                                <span class="playlist-item-title">⚠ - Measles Info - ⚠</span>
                            </div>
                            <a href="../audio/MeaslesInfo.mp3" download="MeaslesInfo.mp3" class="playlist-item-download" title="Download">
                                <i class="fas fa-download"></i>
                            </a>
                         </li>
                         <li class="playlist-item" data-src="../audio/Transgender2025.mp3">
                            <div class="playlist-item-info">
                                <span class="playlist-item-icon"><i class="fas fa-play"></i></span>
                                <span class="playlist-item-title">Analysis: Attack on Trans Rights</span>
                            </div>
                            <a href="../audio/Transgender2025.mp3" download="TransRights2025.mp3" class="playlist-item-download" title="Download">
                                <i class="fas fa-download"></i>
                            </a>
                        </li>
                         <li class="playlist-item" data-src="../audio/ClasswarPodcast.mp3">
                            <div class="playlist-item-info">
                                <span class="playlist-item-icon"><i class="fas fa-play"></i></span>
                                <span class="playlist-item-title">Overview: The Class War</span>
                            </div>
                            <a href="../audio/ClasswarPodcast.mp3" download="ClassWarOverview.mp3" class="playlist-item-download" title="Download">
                                <i class="fas fa-download"></i>
                            </a>
                        </li>
                        <li class="playlist-item" data-src="../audio/GlobalWealth.mp3">
                            <div class="playlist-item-info">
                                <span class="playlist-item-icon"><i class="fas fa-play"></i></span>
                                <span class="playlist-item-title">Global Wealth Distribution Patterns</span>
                            </div>
                            <a href="../audio/GlobalWealth.mp3" download="GlobalWealth.mp3" class="playlist-item-download" title="Download">
                                <i class="fas fa-download"></i>
                            </a>
                        </li>
                        <li class="playlist-item" data-src="../audio/MenciusMoldbug.mp3">
                            <div class="playlist-item-info">
                                <span class="playlist-item-icon"><i class="fas fa-play"></i></span>
                                <span class="playlist-item-title">Profile: Mencius Moldbug (Yarvin)</span>
                            </div>
                            <a href="../audio/MenciusMoldbug.mp3" download="MenciusMoldbug.mp3" class="playlist-item-download" title="Download">
                                <i class="fas fa-download"></i>
                            </a>
                        </li>
                        <!-- Add new audio list items here -->

                    </ul>
                </div>

                 <!-- Related Docs Section (Still within the same card) -->
                 <div class="related-docs" style="margin-top: 1.5rem; border-top: 1px solid var(--border-color); padding-top: 1.5rem;">
                     <h3 style="font-size: 1rem; color: var(--text-secondary); margin-bottom: 1rem; text-transform: uppercase; font-family: var(--font-mono);">Related Documents:</h3>
                     <ul class="content-list">
                         <!-- Related Docs List Items -->
                         <li><a href='/docs/ICEArrests.pdf' target="_blank"><i class="fas fa-file-pdf"></i> ICE/CBP Arrests 2025</a></li>
                         <li><a href='/docs/MassDeportation.pdf' target="_blank"><i class="fas fa-file-pdf"></i> Mass Deportation Dossier</a></li>
                         <li><a href='/docs/Transgender2025.pdf' target="_blank"><i class="fas fa-file-pdf"></i> Trans Rights Attack Vector</a></li>
                         <!-- Add new related docs here -->
                     </ul>
                 </div>
            </div>
            <!-- === END AUDIO PLAYER CARD === -->


            <!-- === Resources Card === -->
            <div class="info-card">
                <h2 class="card-title"><i class="fas fa-shield-halved"></i> Intel Resources:</h2>
                <ul class="content-list">
                    <li><a href='/docs/signalchat' target='_blank'><i class="fas fa-file-lines"></i>Signal Chat (Reconstruction)</a></li>
                    <li><a href='/docs/measlesinfo' target='_blank'><i class="fas fa-file-lines"></i>Measles Info ⚠</a></li>
                    <li><a href='/docs/ICE.pdf' target="_blank"><i class="fas fa-file-lines"></i> ICE/Militia - Overview</a></li>
                    <li><a href='/docs/OtayMesa.pdf' target="_blank"><i class="fas fa-building"></i> Otay Mesa Detention Center</a></li>
                    <li><a href='/docs/ElSalvador.pdf' target="_blank"><i class="fas fa-landmark"></i> El Salvador Mega-Prison Case Study</a></li>
                    <li><a href='/docs/ForProfitPrisons.pdf' target="_blank"><i class="fas fa-dollar-sign"></i> For-Profit Prisons Network</a></li>
                    <li><a href='/docs/GeoGroup.pdf' target="_blank"><i class="fas fa-building-user"></i> Profile: Geo Group</a></li>
                    <li><a href='/docs/USMilitias2025.pdf' target="_blank"><i class="fas fa-users"></i> US Militias Assessment [2025]</a></li>
                    <li><a href='/docs/Project2025.pdf' target="_blank"><i class="fas fa-scroll"></i> Project 2025 Playbook</a></li>
                    <li><a href='/docs/HeritageFoundation.pdf' target="_blank"><i class="fas fa-landmark-flag"></i> Profile: Heritage Foundation</a></li>
                     <!-- Add new items here -->
                </ul>
            </div>
            <!-- === END Resources Card === -->


             <!-- === External Links Card === -->
            <div class="info-card">
                <h2 class="card-title"><i class="fas fa-external-link-alt"></i> External Reconnaissance</h2>
                 <ul class="content-list">
                    <!-- External Links List Items -->
                    <li><a href='https://www.thealtmedia.com' target="_blank" rel="noopener noreferrer"><i class="fas fa-link"></i> The ALT Media</a></li>
                    <li><a href='https://www.realtimefascism.com/' target="_blank" rel="noopener noreferrer"><i class="fas fa-triangle-exclamation"></i> Realtime Fascism Tracker</a></li>
                    <li><a href='https://linktr.ee/revolution2025' target="_blank" rel="noopener noreferrer"><i class="fas fa-link"></i> Revolution 2025 Linktree</a></li>
                    <!-- Add new items here -->
                 </ul>
            </div>
            <!-- === END External Links Card === -->


            <!-- === Persons of Interest Card === -->
            <div class="info-card">
                <h2 class="card-title"><i class="fas fa-user-secret"></i> Persons of Interest</h2>
                 <ul class="content-list">
                    <!-- Persons of Interest List Items -->
                    <li><a href='/dox/CurtisYarvin'><i class="fas fa-user"></i> Curtis "Moldbug" Yarvin</a></li>
                    <li><a href='/dox/MarcLowellAndreessen'><i class="fas fa-user"></i> Marc Andreessen</a></li>
                    <li><a href='/dox/PeterAndreasThiel'><i class="fas fa-user"></i> Peter Thiel</a></li>
                    <li><a href='/dox/LarryEllison.pdf' target="_blank"><i class="fas fa-user"></i> Larry Ellison [PDF Dossier]</a></li>
                    <li><a href='/dox/PaulDans.pdf' target="_blank"><i class="fas fa-user"></i> Paul Dans [PDF Dossier]</a></li>
                    <li><a href='/dox/ElonMusk.pdf' target="_blank"><i class="fas fa-user"></i> Elon ﻿‌​​​‌‌​⁠‌‌​​​​‌⁠‌‌‌​​‌‌⁠‌‌​​​‌‌⁠‌‌​‌​​‌⁠‌‌‌​​‌‌⁠‌‌‌​‌​​﻿Musk [PDF Dossier]</a></li>
                    <!-- Add new items here -->
                 </ul>
            </div>
            <!-- === END Persons of Interest Card === -->


             <!-- === Ideologies Card === -->
            <div class="info-card">
                <h2 class="card-title"><i class="fas fa-brain"></i> Ideological Battlegrounds</h2>
                 <ul class="content-list">
                     <!-- Ideologies List Items -->
                    <li><a href='/docs/NRx.pdf' target="_blank"><i class="fas fa-book-skull"></i> NRx Primer</a></li>
                    <li><a href='/docs/NetworkStates.pdf' target="_blank"><i class="fas fa-network-wired"></i> Network States Analysis</a></li>
                    <li><a href='/docs/DarkEnlightenment.pdf' target="_blank"><i class="fas fa-moon"></i> Dark Enlightenment Concepts</a></li>
                     <!-- Add new items here -->
                 </ul>
            </div>
            <!-- === END Ideologies Card === -->




             <!-- === Dedication Card === -->
            <div class="info-card dedication-card">
                 <h2 class="card-title"><i class="fas fa-hands-helping"></i> Solidarity & Thanks</h2>
                 <p>This platform utilizes Leaflet, created by <a href="https://agafonkin.com/" target="_blank" rel="noopener noreferrer">Volodymyr Agafonkin</a>, a Ukrainian map scientist.</p>
                 <p>His work aids understanding, even as he faces the brutality of invasion. His words remind us:</p>
                 <blockquote>
                    "If you want to help, educate yourself and others on the Russian threat... demand severe Russian sanctions and Ukrainian support from your leaders, protest war... donate to Ukrainian charities. Just don't be silent."
                 </blockquote>
                 <p>Support Ukrainian resistance via <a href="https://savelife.in.ua/en/" target="_blank" rel="noopener noreferrer">Come Back Alive</a> or <a href="https://stand-with-ukraine.pp.ua/" target="_blank" rel="noopener noreferrer">StandWithUkraine</a>.</p>
                 <div class="logo-container">
                    <a href="https://savelife.in.ua/en/" target="_blank" rel="noopener noreferrer"><img src="https://savelife.in.ua/wp-content/themes/savelife/assets/images/new-logo-en.svg" alt="Come Back Alive Logo" class="logo"></a>
                 </div>
            </div>
            <!-- === END Dedication Card === -->

        </div> <!-- // grid-layout -->
    </main>

    <footer class="site-footer">
        <p>© // RESISTANCE PROTOCOLS IN EFFECT //</p>
        <p>KNOWLEDGE IS POWER :: STAY VIGILANT</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Audio Player ---
            let currentTrack = null;
            let currentTrackIndex = -1;
            let isPlaying = false;
            let currentVolume = 1;
            let isMuted = false;
            let updateInterval;

            // DOM Elements
            const player = document.getElementById('audio-player');
            // Only init player if the element exists
            if (player) {
                const playlistElement = player.querySelector('#player-playlist');
                const progressBar = player.querySelector('#progress-bar');
                const progressWrapper = player.querySelector('#progress-bar-wrapper');
                const currentTimeEl = player.querySelector('#current-time');
                const durationEl = player.querySelector('#duration');
                const trackTitleEl = player.querySelector('#player-track-title');
                const playBtn = player.querySelector('#play-btn');
                const pauseBtn = player.querySelector('#pause-btn');
                const stopBtn = player.querySelector('#stop-btn');
                const prevBtn = player.querySelector('#prev-btn');
                const nextBtn = player.querySelector('#next-btn');
                const volumeBtn = player.querySelector('#volume-btn');
                const volumeSlider = player.querySelector('#volume-slider');
                const volumeIcon = volumeBtn.querySelector('i');
                let playlistItems = Array.from(playlistElement.querySelectorAll('.playlist-item')); // Use Array.from for easier methods

                // --- Helper Functions ---
                const formatTime = (seconds) => {
                    if (isNaN(seconds) || !isFinite(seconds)) return '0:00';
                    const mins = Math.floor(seconds / 60);
                    const secs = Math.floor(seconds % 60);
                    return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
                };

                const updateProgress = () => {
                    if (!currentTrack || !isPlaying) return;
                    const seek = currentTrack.seek() || 0;
                    const duration = currentTrack.duration() || 0;
                    const progressPercent = duration ? (seek / duration) * 100 : 0;
                    progressBar.style.width = `${progressPercent}%`;
                    currentTimeEl.textContent = formatTime(seek);
                    // Only update duration display when it's valid and hasn't been set yet
                    if (duration > 0 && durationEl.textContent === '0:00') {
                        durationEl.textContent = formatTime(duration);
                    }
                };

                const startProgressUpdate = () => {
                    clearInterval(updateInterval);
                    updateProgress(); // Update immediately
                    updateInterval = setInterval(updateProgress, 500);
                };

                const stopProgressUpdate = () => clearInterval(updateInterval);

                const updateVolumeIcon = () => {
                    if (isMuted || currentVolume === 0) volumeIcon.className = 'fas fa-volume-xmark';
                    else if (currentVolume < 0.5) volumeIcon.className = 'fas fa-volume-low';
                    else volumeIcon.className = 'fas fa-volume-high';
                };

                const resetPlayerUI = () => {
                    progressBar.style.width = '0%';
                    currentTimeEl.textContent = '0:00';
                    durationEl.textContent = '0:00';
                    trackTitleEl.textContent = 'Select Briefing';
                    playBtn.style.display = 'inline-flex';
                    pauseBtn.style.display = 'none';
                    playlistItems.forEach(item => item.classList.remove('playing'));
                };


                // --- Core Player Functions ---
                const playTrack = (index) => {
                    if (currentTrack) {
                        currentTrack.stop();
                        stopProgressUpdate();
                    }

                    // Ensure index is valid and wraps around
                    if (playlistItems.length === 0) return;
                    if (index < 0) index = playlistItems.length - 1;
                    else if (index >= playlistItems.length) index = 0;

                    currentTrackIndex = index;
                    const trackItem = playlistItems[index];
                    const trackSrc = trackItem.getAttribute('data-src');
                    const trackName = trackItem.querySelector('.playlist-item-title')?.textContent || 'Loading...';

                    // Reset duration for new track
                    durationEl.textContent = '0:00';

                    currentTrack = new Howl({
                        src: [trackSrc],
                        html5: true,
                        volume: isMuted ? 0 : currentVolume,
                        onplay: () => {
                            isPlaying = true;
                            playBtn.style.display = 'none';
                            pauseBtn.style.display = 'inline-flex';
                            trackTitleEl.textContent = trackName;
                            durationEl.textContent = formatTime(currentTrack.duration()); // Try updating duration here
                            startProgressUpdate();
                            playlistItems.forEach(item => item.classList.remove('playing'));
                            trackItem.classList.add('playing');
                        },
                        onload: () => {
                            // Update duration once loaded if not already set onplay
                            if (durationEl.textContent === '0:00' && currentTrack.duration()) {
                                durationEl.textContent = formatTime(currentTrack.duration());
                            }
                        },
                        onpause: () => { isPlaying = false; playBtn.style.display = 'inline-flex'; pauseBtn.style.display = 'none'; stopProgressUpdate(); },
                        onstop: () => { isPlaying = false; stopProgressUpdate(); resetPlayerUI(); currentTrackIndex = -1; },
                        onend: () => { playNext(); },
                        onloaderror: (id, err) => { console.error("Howler Load Error:", id, err); trackTitleEl.textContent = `LOAD ERR: ${trackName}`; resetPlayerUI(); },
                        onplayerror: (id, err) => { console.error("Howler Play Error:", id, err); trackTitleEl.textContent = `PLAY ERR: ${trackName}`; resetPlayerUI(); }
                    });
                    currentTrack.play();
                };

                const playNext = () => playTrack(currentTrackIndex + 1);

                const playPrev = () => {
                    if (currentTrack && currentTrack.seek() > 3) {
                        currentTrack.seek(0);
                        if (!isPlaying) currentTrack.play(); // Restart if paused
                    } else {
                        playTrack(currentTrackIndex - 1);
                    }
                };

                // --- Event Listeners ---
                playBtn.addEventListener('click', () => {
                    if (currentTrack && !isPlaying) currentTrack.play();
                    else if (!currentTrack) playTrack(0); // Play first if nothing selected
                });
                pauseBtn.addEventListener('click', () => { if (currentTrack && isPlaying) currentTrack.pause(); });
                stopBtn.addEventListener('click', () => { if (currentTrack) currentTrack.stop(); });
                prevBtn.addEventListener('click', playPrev);
                nextBtn.addEventListener('click', playNext);

                progressWrapper.addEventListener('click', (e) => {
                    if (!currentTrack || !currentTrack.duration()) return;
                    const rect = progressWrapper.getBoundingClientRect();
                    const clickX = e.clientX - rect.left;
                    const width = rect.width;
                    const seekPercent = Math.max(0, Math.min(1, clickX / width));
                    currentTrack.seek(currentTrack.duration() * seekPercent);
                    updateProgress(); // Update UI immediately
                });

                volumeSlider.addEventListener('input', (e) => {
                    currentVolume = parseFloat(e.target.value);
                    isMuted = currentVolume === 0;
                    Howler.volume(currentVolume);
                    if (currentTrack) currentTrack.volume(currentVolume);
                    updateVolumeIcon();
                });

                volumeBtn.addEventListener('click', () => {
                    isMuted = !isMuted;
                    const newVolume = isMuted ? 0 : (currentVolume > 0 ? currentVolume : 0.5); // Use stored volume or default if unmuting from 0
                    if(!isMuted) currentVolume = newVolume; // Store the volume level if unmuting
                    volumeSlider.value = newVolume;
                    Howler.volume(newVolume);
                    if (currentTrack) currentTrack.volume(newVolume);
                    updateVolumeIcon();
                });

                playlistItems.forEach((item, index) => {
                    const infoArea = item.querySelector('.playlist-item-info');
                    const downloadBtn = item.querySelector('.playlist-item-download');

                    // Click on info area (icon or title) to play
                    if (infoArea) {
                        infoArea.addEventListener('click', () => playTrack(index));
                    }

                    // Prevent download click from triggering play
                    if (downloadBtn) {
                        downloadBtn.addEventListener('click', (e) => e.stopPropagation());
                    }
                });

                // --- Initial Setup ---
                volumeSlider.value = currentVolume;
                Howler.volume(currentVolume);
                updateVolumeIcon();

            } // End of if(player) check

            // No specific JS needed for the map iframe or link button beyond HTML/CSS

        });
    </script>

</body>
</html>
